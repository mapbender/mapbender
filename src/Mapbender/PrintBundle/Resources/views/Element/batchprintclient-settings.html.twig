{% extends '@MapbenderPrint/Element/printclient-settings.html.twig' %}

{# Override the form bottom to add batch print specific elements #}
{% block printclient_form_bottom %}
    {{ parent() }}
    
    {% if enableKmlUpload %}
    {# Geospatial File Upload (KML, GeoJSON) #}
    <div class="form-group no-gutters kml-upload -fn-kml-upload">
        <label class="kml-upload-label">{{ 'mb.print.printclient.batchprint.track.upload' | trans }}</label>
        <div>
            <div>
                <input type="file" 
                       name="kml_file" 
                       accept=".kml,.geojson,.json,application/vnd.google-earth.kml+xml,application/geo+json"
                       class="kml-file-input -fn-kml-file-input">
            </div>
            <div class="kml-buttons -fn-kml-buttons">
                <button type="button" 
                        class="button -fn-clear-kml-button">
                    {{ 'mb.print.printclient.batchprint.kml.clear' | trans }}
                </button>
                <button type="button" 
                        class="button kml-place-frames-button -fn-place-frames-button">
                    {{ 'mb.print.printclient.batchprint.kml.placeframes' | trans }}
                </button>
                <label class="kml-adjust-label">
                    <input type="checkbox" class="kml-adjust-checkbox -fn-adjust-frames-checkbox">
                    {{ 'mb.print.printclient.batchprint.kml.adjustframes' | trans }}
                </label>
            </div>
            <div class="kml-overlap-section">
                <label class="kml-overlap-label">
                    {{ 'mb.print.printclient.batchprint.kml.overlap' | trans }}
                </label>
                <input type="number" 
                       name="frame_overlap" 
                       class="kml-overlap-input -fn-frame-overlap-input"
                       value="10"
                       min="0"
                       max="100"
                       step="1">
                <span>%</span>
            </div>
        </div>
        <small class="kml-status -fn-kml-status"></small>
    </div>
    {% endif %}
    
    {# Frame tracking table #}
    <div class="form-group no-gutters frame-table -fn-frame-table">
        <div>
            <h4>{{ 'mb.print.printclient.batchprint.tracking.title' | trans }}</h4>
            <button type="button" 
                    class="button delete-all-frames -fn-delete-all-frames">
                {{ 'mb.print.printclient.batchprint.tracking.deleteall' | trans }}
            </button>
        </div>
        <div>
            <table>
                <thead>
                    <tr>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.no' | trans }}</th>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.scale' | trans }}</th>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.template' | trans }}</th>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.quality' | trans }}</th>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.rotation' | trans }}</th>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.delete' | trans }}</th>
                    </tr>
                </thead>
                <tbody>
                    {# Rows will be added dynamically by JavaScript #}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
