{% extends '@MapbenderPrint/Element/printclient-settings.html.twig' %}

{# Override the form bottom to add batch print specific elements #}
{% block printclient_form_bottom %}
    {{ parent() }}
    
    {% if enableGeofileUpload %}
    {# Geospatial File Upload (KML, GeoJSON) #}
    <div class="form-group no-gutters geofile-upload -fn-geofile-upload">
        <label class="geofile-upload-label">{{ 'mb.print.printclient.batchprint.track.upload' | trans }}</label>
        <div>
            <div>
                <input type="file" 
                       name="geofile" 
                       accept=".kml,.geojson,.json,.gpx,.gml,.xml,application/vnd.google-earth.kml+xml,application/geo+json,application/gpx+xml,application/gml+xml"
                       class="form-control geofile-file-input -fn-geofile-file-input">
            </div>
            <div class="geofile-buttons -fn-geofile-buttons">
                <button type="button" 
                        class="btn -fn-clear-geofile-button">
                    {{ 'mb.print.printclient.batchprint.geofile.clear' | trans }}
                </button>
                <button type="button" 
                        class="btn geofile-place-frames-button -fn-place-frames-button">
                    {{ 'mb.print.printclient.batchprint.geofile.placeframes' | trans }}
                </button>
                <label class="geofile-adjust-label">
                    <input type="checkbox" class="geofile-adjust-checkbox -fn-adjust-frames-checkbox">
                    {{ 'mb.print.printclient.batchprint.geofile.adjustframes' | trans }}
                </label>
            </div>
            <div class="geofile-overlap-section">on">
                <label class="geofile-overlap-label">
                    {{ 'mb.print.printclient.batchprint.geofile.overlap' | trans }}
                </label>
                <input type="number" 
                       name="frame_overlap" 
                       class="form-control geofile-overlap-input -fn-frame-overlap-input"
                       value="10"
                       min="0"
                       max="100"
                       step="1">
                <span>%</span>
            </div>
        </div>
        <small class="geofile-status -fn-geofile-status"></small>
    </div>
    {% endif %}
    
    {# Frame tracking table #}
    <div class="form-group no-gutters frame-table -fn-frame-table">
        <div>
            <h4>{{ 'mb.print.printclient.batchprint.tracking.title' | trans }}</h4>
            <button type="button" 
                    class="btn delete-all-frames -fn-delete-all-frames">
                {{ 'mb.print.printclient.batchprint.tracking.deleteall' | trans }}
            </button>
        </div>
        <div class="frame-table-empty-state -fn-frame-table-empty">
            <p>{{ 'mb.print.printclient.batchprint.tracking.empty' | trans }}</p>
        </div>
        <div class="frame-table-content -fn-frame-table-content">
            <table class="table table-condensed table-striped">
                <thead>
                    <tr>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.no' | trans }}</th>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.scale' | trans }}</th>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.template' | trans }}</th>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.quality' | trans }}</th>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.rotation' | trans }}</th>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.delete' | trans }}</th>
                    </tr>
                </thead>
                <tbody>
                    {# Rows will be added dynamically by JavaScript #}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
