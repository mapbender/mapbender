{% extends '@MapbenderPrint/Element/printclient-settings.html.twig' %}

{# Override the form bottom to add batch print specific elements #}
{% block printclient_form_bottom %}
    {{ parent() }}
    
    {% if enableKmlUpload %}
    {# KML File Upload #}
    <div class="form-group no-gutters kml-upload -fn-kml-upload">
        <label for="kml-file-input">{{ 'mb.print.printclient.batchprint.kml.upload' | trans }}</label>
        <div>
            <div>
                <input type="file" 
                       id="kml-file-input" 
                       name="kml_file" 
                       accept=".kml,application/vnd.google-earth.kml+xml"
                       class="kml-file-input -fn-kml-file-input">
            </div>
            <div class="kml-buttons -fn-kml-buttons">
                <button type="button" 
                        class="button -fn-clear-kml-button">
                    {{ 'mb.print.printclient.batchprint.kml.clear' | trans }}
                </button>
                <button type="button" 
                        class="button kml-place-frames-button -fn-place-frames-button">
                    {{ 'mb.print.printclient.batchprint.kml.placeframes' | trans }}
                </button>
                <label style="display: inline-flex; align-items: center; margin-left: 12px;">
                    <input type="checkbox" class="-fn-adjust-frames-checkbox" style="margin-right: 6px;">
                    {{ 'mb.print.printclient.batchprint.kml.adjustframes' | trans }}
                </label>
            </div>
            <div style="display: flex; align-items: center; gap: 8px; margin-top: 8px;">
                <label for="frame-overlap-input" style="margin: 0;">
                    {{ 'mb.print.printclient.batchprint.kml.overlap' | trans }}
                </label>
                <input type="number" 
                       id="frame-overlap-input" 
                       name="frame_overlap" 
                       class="-fn-frame-overlap-input"
                       value="10"
                       min="0"
                       max="100"
                       step="1"
                       style="width: 60px;">
                <span>%</span>
            </div>
        </div>
        <small class="kml-status -fn-kml-status"></small>
    </div>
    {% endif %}
    
    {# Frame tracking table #}
    <div class="form-group no-gutters frame-table -fn-frame-table">
        <div>
            <h4>{{ 'mb.print.printclient.batchprint.tracking.title' | trans }}</h4>
            <button type="button" 
                    class="button delete-all-frames -fn-delete-all-frames">
                {{ 'mb.print.printclient.batchprint.tracking.deleteall' | trans }}
            </button>
        </div>
        <div>
            <table>
                <thead>
                    <tr>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.no' | trans }}</th>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.scale' | trans }}</th>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.template' | trans }}</th>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.quality' | trans }}</th>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.rotation' | trans }}</th>
                        <th>{{ 'mb.print.printclient.batchprint.tracking.delete' | trans }}</th>
                    </tr>
                </thead>
                <tbody>
                    {# Rows will be added dynamically by JavaScript #}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
